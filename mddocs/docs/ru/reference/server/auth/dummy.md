# Фиктивный провайдер аутентификации { #auth-server-dummy }

## Описание

Этот провайдер аутентификации позволяет войти в систему с любым именем пользователя и паролем, а затем выдает токен доступа.

После успешной аутентификации имя пользователя сохраняется в базе данных бэкенда.

## Схема взаимодействия

```plantuml title="Схема взаимодействия"

        @startuml
            title DummyAuthProvider
            participant "Клиент"
            participant "Бэкенд"

            == POST v1/auth/token ==

            activate "Клиент"
            alt Успешный случай
                "Клиент" -> "Бэкенд" ++ : логин + пароль
                "Бэкенд" --> "Бэкенд" : Пароль полностью игнорируется
                "Бэкенд" --> "Бэкенд" : Проверить пользователя во внутренней базе данных бэкенда
                "Бэкенд" -> "Бэкенд" : Создать пользователя, если не существует
                "Бэкенд" -[#green]> "Клиент" -- : Сгенерировать и вернуть access_token

            else Пользователь заблокирован
                "Клиент" -> "Бэкенд" ++ : логин + пароль
                "Бэкенд" --> "Бэкенд" : Пароль полностью игнорируется
                "Бэкенд" --> "Бэкенд" : Проверить пользователя во внутренней базе данных бэкенда
                "Бэкенд" x-[#red]> "Клиент" -- : 401 Unauthorized

            else Пользователь удален
                "Клиент" -> "Бэкенд" ++ : логин + пароль
                "Бэкенд" --> "Бэкенд" : Пароль полностью игнорируется
                "Бэкенд" --> "Бэкенд" : Проверить пользователя во внутренней базе данных бэкенда
                "Бэкенд" x-[#red]> "Клиент" -- : 404 Not found
            end

            == GET v1/datasets ==

            alt Успешный случай
                "Клиент" -> "Бэкенд" ++ : access_token
                "Бэкенд" --> "Бэкенд" : Валидировать токен
                "Бэкенд" --> "Бэкенд" : Проверить пользователя во внутренней базе данных бэкенда
                "Бэкенд" -> "Бэкенд" : Получить данные
                "Бэкенд" -[#green]> "Клиент" -- : Вернуть данные

            else Токен истек
                "Клиент" -> "Бэкенд" ++ : access_token
                "Бэкенд" --> "Бэкенд" : Валидировать токен
                "Бэкенд" x-[#red]> "Клиент" -- : 401 Unauthorized

            else Пользователь не найден
                "Клиент" -> "Бэкенд" ++ : access_token
                "Бэкенд" --> "Бэкенд" : Валидировать токен
                "Бэкенд" --> "Бэкенд" : Проверить пользователя во внутренней базе данных бэкенда
                "Бэкенд" x-[#red]> "Клиент" -- : 404 Not found
            end

            deactivate "Клиент"
        @enduml
```

## Конфигурация

::: data_rentgen.server.settings.auth.dummy.DummyAuthProviderSettings

::: data_rentgen.server.settings.auth.jwt.JWTSettings
